<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Page Component Model | Marcel Blijleven</title>






<link rel="stylesheet" href="/css/index.35dbb91b4658fec8c693d9ab005682d95e1b3c975106cb4fa0ab29047e3ffbf6.css">


      <script src="/js/main.js"></script>


  
  
    
    
    
    
  
  
  <link href="//fonts.googleapis.com/css?family=Inconsolata:400,400i,700,700i" rel="stylesheet">




</head>
<body className="bg-white text-black antialiased dark:bg-gray-950 dark:text-white">
  <header>
    <h1>Marcel Blijleven</h1>

  <nav>
    <ul>
    <li>
      <a href="/">Home</a>
    </li>
    <li>
      <a aria-current="true" class="ancestor" href="/blog/">Blog</a>
    </li>
    </ul>
  </nav>


  </header>
  <main>
    
  <h1>Page Component Model</h1>

  
  
  <time datetime="2024-02-06T00:00:00&#43;00:00">February 6, 2024</time>

  <p>You can consider <em>Page Component</em> Model as an extension or successor to <em>Page Object Model</em>,
a design pattern used in test automation frameworks. Using the <em>Page Object Model</em> design pattern you create a class
for each page which hides locators and logic from your tests, while also providing ways to interact with &lsquo;pages&rsquo;.</p>
<p>Whenever I wrote automated end-to-end tests using <em>Page Object Model</em> I noticed two things:</p>
<ol>
<li>It&rsquo;s great for re-usability between tests, not so much for sharing functionality between similar pages.</li>
<li>Page objects can get too big and become unmaintainable pretty fast.</li>
</ol>
<p>The reason why it&rsquo;s not so great for sharing functionality between similar pages is because it requires you to create
a parent class which has a bunch of functionality that two or more pages share. As soon as one of the pages is
changed slightly you&rsquo;ll have a lot of refactoring to do to make sure the changes don&rsquo;t affect all the other pages.</p>
<p>The second thing is that as the project grows, pages get more functionality and so does the Page Object.
Combine this with the other reason and you get a recipe for disaster ðŸ˜„.</p>
<h2 id="page-component-model">Page Component Model</h2>
<p>This is why I like to keep page objects as small as possible and focus on using components instead. A component can be
as small as a <code>&lt;button&gt;</code> or as big as a <code>&lt;form&gt;</code> or any other element with lots of children and grandchildren. The key is to use <em>Composition over Inheritance</em>. This makes your
design more flexible.</p>
<p>You can think of Inheritance as an <em>is-a</em> relationship, which is tightly coupled and Composition
as a <em>has-a</em> relationship, which is loosely coupled. By splitting up functionality into several components it becomes
really easy to share functionality between different pages and tests.</p>
<h3 id="common-base-component">Common Base Component</h3>
<p>I like to create a single base component class that every component inherits from. Usually this is as far as I go
with inheritance for the components. This base class has two purposes:</p>
<ol>
<li>provide scoping</li>
<li>exposing default &rsquo;locator/element&rsquo; methods.</li>
</ol>
<p>In the following sections I&rsquo;ll provide some code example using Python and Playwright, but the concept applies to other
languages and frameworks too.</p>
<h4 id="scoping">Scoping</h4>
<p>The base component takes a locator in its init method which can be a user-visible locator like text
or css, xpath, React, Vue etc. This locator is assigned to the component so that it can be reused throughout its lifetime.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fe8019">class</span> BaseComponent:
</span></span><span style="display:flex;"><span>    root_locator: Locator
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> __init__(self, locator: Locator) <span style="color:#fe8019">-&gt;</span> <span style="color:#fe8019">None</span>:
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>root_locator <span style="color:#fe8019">=</span> locator
</span></span></code></pre></div><p>This might not seem like much at the moment, but if you take into account that you can use composition on components, you
can extend this locator to new components which automatically provides scoping to the parent component.</p>
<p>A simple example: If you have a page with a login form, sign up form and multiple buttons spread throughout the page it can be difficult to target
the actual &rsquo;login&rsquo; button instead of one of the many other buttons. By using the root locator of a component this becomes
a lot easier because you can use it to locate other elements/components that are children or grandchildren in the DOM.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fe8019">class</span> LoginForm(BaseComponent):
</span></span><span style="display:flex;"><span>    @property
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> <span style="color:#fabd2f">login_button</span>(self) <span style="color:#fe8019">-&gt;</span> Locator:
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>root_locator<span style="color:#fe8019">.</span>locator(<span style="color:#b8bb26">&#34;button&#34;</span>)  <span style="color:#928374;font-style:italic"># This is scoped to `#login-form button`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>login_form <span style="color:#fe8019">=</span> LoginForm(page<span style="color:#fe8019">.</span>locator(<span style="color:#928374;font-style:italic">#login-form))</span>
</span></span><span style="display:flex;"><span>login_form<span style="color:#fe8019">.</span>login_button<span style="color:#fe8019">.</span>click()
</span></span></code></pre></div><p>This can be extended to other components too:</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fe8019">class</span> SuperSubmitButton(BaseComponent):
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">...</span>  <span style="color:#928374;font-style:italic"># details omitted</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#fe8019">class</span> LoginForm(BaseComponent):
</span></span><span style="display:flex;"><span>    submit_button: SuperSubmitButton
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> __init__(self, locator: Locator) <span style="color:#fe8019">-&gt;</span> <span style="color:#fe8019">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#fabd2f">super</span>()<span style="color:#fe8019">.</span>__init__(locator)
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>submit_button <span style="color:#fe8019">=</span> SuperSubmitButton(this<span style="color:#fe8019">.</span>root_locator<span style="color:#fe8019">.</span>locator(<span style="color:#b8bb26">&#34;button&#34;</span>))
</span></span></code></pre></div><p>Because you&rsquo;re using the root_locator of the LoginForm component, the SuperSubmitButton will automatically be
scoped to <code>#login-form button</code>.</p>
<h4 id="exposing-default-locatorelement-methods">Exposing default locator/element methods</h4>
<p>Other things I like to add to the base component are the default locator methods you get on a locator, these can be:</p>
<ul>
<li>click</li>
<li>type</li>
<li>is visible</li>
<li>scroll into view</li>
<li>and more</li>
</ul>
<p>To add these methods to the base component you simple have to call them on the root locator:</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fe8019">class</span> BaseComponent:
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> <span style="color:#fabd2f">click</span>(self, <span style="color:#fe8019">**</span>kwargs) <span style="color:#fe8019">-&gt;</span> <span style="color:#fe8019">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#fe8019">return</span> self<span style="color:#fe8019">.</span>root_locator<span style="color:#fe8019">.</span>click(<span style="color:#fe8019">**</span>kwargs)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> <span style="color:#fabd2f">type</span>(
</span></span><span style="display:flex;"><span>        self,
</span></span><span style="display:flex;"><span>        text: <span style="color:#fabd2f">str</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#fe8019">*</span>,
</span></span><span style="display:flex;"><span>        delay: <span style="color:#fabd2f">float</span> <span style="color:#fe8019">|</span> <span style="color:#fe8019">None</span> <span style="color:#fe8019">=</span> <span style="color:#fe8019">None</span>,
</span></span><span style="display:flex;"><span>        timeout: <span style="color:#fabd2f">float</span> <span style="color:#fe8019">|</span> <span style="color:#fe8019">None</span> <span style="color:#fe8019">=</span> <span style="color:#fe8019">None</span>,
</span></span><span style="display:flex;"><span>        no_wait_after: <span style="color:#fabd2f">bool</span> <span style="color:#fe8019">|</span> <span style="color:#fe8019">None</span> <span style="color:#fe8019">=</span> <span style="color:#fe8019">None</span>,
</span></span><span style="display:flex;"><span>    ) <span style="color:#fe8019">-&gt;</span> <span style="color:#fe8019">None</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#fe8019">return</span> self<span style="color:#fe8019">.</span>root_locator<span style="color:#fe8019">.</span>type(
</span></span><span style="display:flex;"><span>            text,
</span></span><span style="display:flex;"><span>            delay<span style="color:#fe8019">=</span>delay,
</span></span><span style="display:flex;"><span>            timeout<span style="color:#fe8019">=</span>timeout,
</span></span><span style="display:flex;"><span>            no_wait_after<span style="color:#fe8019">=</span>no_wait_after
</span></span><span style="display:flex;"><span>        )
</span></span></code></pre></div><p>This allows you to interact with your custom components just like you would with normal locators.</p>
<h2 id="adding-component-specific-methods">Adding component specific methods</h2>
<p>Now that you have a basic component you can create components with specific methods you want to use in tests. For example
a login form. If you think about the ways you interact with a login form there are three main actions you do when logging
in:</p>
<ol>
<li>Type in username</li>
<li>Type in password</li>
<li>Press the login button</li>
</ol>
<p>So we can identify at least three fields, or subcomponents, we interact with. Two input fields and a button. Let&rsquo;s first
add these.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fe8019">class</span> LoginForm(BaseComponent):
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @property
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> <span style="color:#fabd2f">username_inputfield</span>(self) <span style="color:#fe8019">-&gt;</span> Locator:
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>root_locator<span style="color:#fe8019">.</span>locate(<span style="color:#b8bb26">&#34;input[name=&#39;username&#39;]&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @property
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> <span style="color:#fabd2f">password_inputfield</span>(self) <span style="color:#fe8019">-&gt;</span> Locator:
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>root_locator<span style="color:#fe8019">.</span>locate(<span style="color:#b8bb26">&#34;input[name=&#39;password&#39;]&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    @property
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> <span style="color:#fabd2f">login_button</span>(self) <span style="color:#fe8019">-&gt;</span> Locator:
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>root_locator<span style="color:#fe8019">.</span>locate(<span style="color:#b8bb26">&#34;button[type=&#39;submit&#39;]&#34;</span>)
</span></span></code></pre></div><p>Now it&rsquo;s possible to enter a username using just <code>login_form.username_inputfield.type(&quot;...&quot;)</code>. You could put this
inside a separate method too.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fe8019">class</span> LoginForm(BaseComponent):
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> <span style="color:#fabd2f">enter_username</span>(self, username: <span style="color:#fabd2f">str</span>) <span style="color:#fe8019">-&gt;</span> <span style="color:#fe8019">None</span>:
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>username_inputfield<span style="color:#fe8019">.</span>type(username)
</span></span></code></pre></div><p>Then combine all the methods into a single login method</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#fe8019">class</span> LoginForm(BaseComponent):
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">def</span> <span style="color:#fabd2f">login</span>(self, username: <span style="color:#fabd2f">str</span>, password: <span style="color:#fabd2f">str</span>) <span style="color:#fe8019">-&gt;</span> <span style="color:#fe8019">None</span>:
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>enter_username(username)
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>enter_password(password)
</span></span><span style="display:flex;"><span>        self<span style="color:#fe8019">.</span>login_button<span style="color:#fe8019">.</span>click()
</span></span></code></pre></div><p>And now you have a working LoginForm component that you can use on both the login page and for example an order checkout
page.</p>
<h2 id="using-components">Using components</h2>
<p>Now it&rsquo;s time to use the components in your tests. You can still use page objects, a login page <em>has a</em> login form for example. But you don&rsquo;t need to, you can
use a lightweight method too.</p>
<div class="highlight"><pre tabindex="0" style="color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># Page Object</span>
</span></span><span style="display:flex;"><span><span style="color:#fe8019">def</span> <span style="color:#fabd2f">test_user_can_login</span>(page: Page, user_credentials: <span style="color:#fabd2f">tuple</span>[<span style="color:#fabd2f">str</span>, <span style="color:#fabd2f">str</span>]) <span style="color:#fe8019">-&gt;</span> <span style="color:#fe8019">None</span>:
</span></span><span style="display:flex;"><span>    login_page <span style="color:#fe8019">=</span> LoginPage(page)
</span></span><span style="display:flex;"><span>    login_page<span style="color:#fe8019">.</span>goto()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    login_page<span style="color:#fe8019">.</span>login_form<span style="color:#fe8019">.</span>login(<span style="color:#fe8019">*</span>user_credentials)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">assert</span> <span style="color:#fe8019">...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#928374;font-style:italic"># No Page Object</span>
</span></span><span style="display:flex;"><span><span style="color:#fe8019">def</span> <span style="color:#fabd2f">test_user_can_login</span>(page: Page, user_credentials: <span style="color:#fabd2f">tuple</span>[<span style="color:#fabd2f">str</span>, <span style="color:#fabd2f">str</span>]) <span style="color:#fe8019">-&gt;</span> <span style="color:#fe8019">None</span>:
</span></span><span style="display:flex;"><span>    page<span style="color:#fe8019">.</span>goto(<span style="color:#b8bb26">&#34;https://www.marcelblijleven.com&#34;</span>)
</span></span><span style="display:flex;"><span>    login_form <span style="color:#fe8019">=</span> LoginForm(page<span style="color:#fe8019">.</span>locator(<span style="color:#b8bb26">&#34;#login-form&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    login_form<span style="color:#fe8019">.</span>login(<span style="color:#fe8019">*</span>user_credentials)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#fe8019">assert</span> <span style="color:#fe8019">...</span>
</span></span></code></pre></div><p>That&rsquo;s it for the basics on Page Componente. Have fun tinkering with them!</p>

  
  <div>
    <div>Tags:</div>
    <ul>
        <li><a href="/tags/test-automation/">Test Automation</a></li>
        <li><a href="/tags/page-component-model/">Page Component Model</a></li>
        <li><a href="/tags/python/">Python</a></li>
        <li><a href="/tags/playwright/">Playwright</a></li>
        <li><a href="/tags/testing/">Testing</a></li>
    </ul>
  </div>


  </main>
  <footer>
    <p>Copyright 2024. All rights reserved.</p>

  </footer>
</body>
</html>
